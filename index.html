<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
<meta name="theme-color" content="#0f172a">
<meta name="description" content="ULGI PRO - –ë–∞—è–Ω-”®–ª–≥–∏–π –∞—É–∞ —Ä–∞–π—ã. ECMWF, GFS –º–æ–¥–µ–ª—å–¥–µ—Ä—ñ.">

<title>ULGI PRO | –ë–∞—è–Ω-”®–ª–≥–∏–π –ê—É–∞ –†–∞–π—ã üå§Ô∏è</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Exo+2:wght@300;400;600;700;800&display=swap" rel="stylesheet">

<style>
/* CSS RESET & VARIABLES */
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
:root {
  --primary: #0ea5e9;
  --secondary: #8b5cf6;
  --accent: #f59e0b;
  --danger: #ef4444;
  --success: #10b981;
  --glass: rgba(15, 23, 42, 0.6);
  --glass-border: rgba(255, 255, 255, 0.1);
  --text: #f1f5f9;
  --text-dim: #94a3b8;
}

body {
  font-family: 'Exo 2', sans-serif;
  background: #0f172a;
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
  position: relative;
  padding-bottom: 40px;
}

/* BACKGROUND ANIMATION */
.bg-fixed {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
  background: radial-gradient(circle at 50% 0%, #1e293b 0%, #0f172a 100%);
}
.orb {
  position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.4;
  animation: float 20s ease-in-out infinite;
}
.orb1 { width: 300px; height: 300px; background: var(--primary); top: -100px; left: -100px; }
.orb2 { width: 250px; height: 250px; background: var(--secondary); bottom: -50px; right: -50px; animation-delay: -5s; }
@keyframes float { 0%, 100% { transform: translate(0,0); } 50% { transform: translate(30px, 50px); } }

/* LAYOUT */
.container { max-width: 500px; margin: 0 auto; padding: 15px; position: relative; z-index: 1; }

/* HEADER */
.hero { text-align: center; margin: 20px 0 30px; }
.logo {
  font-family: 'Orbitron', sans-serif; font-size: 42px; font-weight: 900;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  text-shadow: 0 0 30px rgba(14, 165, 233, 0.4); margin-bottom: 5px;
}
.tagline { font-size: 14px; color: var(--text-dim); text-transform: uppercase; letter-spacing: 2px; }
.model-badge {
  display: inline-block; margin-top: 10px; padding: 4px 12px;
  background: rgba(14, 165, 233, 0.1); border: 1px solid var(--primary);
  border-radius: 20px; font-size: 11px; font-weight: 700; color: var(--primary);
}

/* CONTROLS */
.controls { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
.lang-group { display: flex; gap: 5px; width: 100%; justify-content: center; margin-bottom: 10px; }
.lang-btn {
  background: transparent; border: 1px solid var(--glass-border); color: var(--text-dim);
  padding: 8px 16px; border-radius: 12px; font-size: 12px; font-weight: 700; cursor: pointer;
  font-family: 'Orbitron', sans-serif; transition: 0.3s;
}
.lang-btn.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 0 15px rgba(14,165,233,0.4); }

.loc-bar { display: flex; width: 100%; gap: 10px; }
.gps-btn {
  background: var(--success); color: white; border: none; padding: 0 15px;
  border-radius: 14px; font-size: 18px; cursor: pointer; display: flex; align-items: center;
  transition: 0.3s; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}
.gps-btn.active { background: var(--primary); box-shadow: 0 0 15px rgba(14,165,233,0.5); }
.gps-btn:active { transform: scale(0.95); }

.loc-select {
  flex: 1; background: rgba(30, 41, 59, 0.8); border: 1px solid var(--glass-border);
  color: white; padding: 12px 15px; border-radius: 14px; font-size: 16px; outline: none;
  font-family: inherit; appearance: none;
}

/* MAIN WEATHER CARD */
.main-card {
  background: rgba(255,255,255,0.03); backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border); border-radius: 24px; padding: 30px 20px;
  text-align: center; margin-bottom: 20px; position: relative; overflow: hidden;
  box-shadow: 0 10px 40px rgba(0,0,0,0.3);
}
.main-icon { font-size: 80px; margin-bottom: 10px; filter: drop-shadow(0 0 20px rgba(255,255,255,0.2)); }
.main-temp {
  font-family: 'Orbitron', sans-serif; font-size: 80px; font-weight: 900; line-height: 1;
  background: linear-gradient(to bottom, #fff, #94a3b8); -webkit-background-clip: text;
  -webkit-text-fill-color: transparent; margin: 10px 0;
}
.main-desc { font-size: 20px; font-weight: 600; text-transform: capitalize; color: var(--primary); margin-bottom: 15px; }
.main-meta {
  display: flex; justify-content: center; gap: 20px; font-size: 14px; color: var(--text-dim);
}
.meta-item { display: flex; align-items: center; gap: 6px; }

/* ALERT BANNER */
.alert-box {
  background: rgba(239, 68, 68, 0.15); border: 1px solid var(--danger);
  color: #fca5a5; padding: 15px; border-radius: 16px; margin-bottom: 20px;
  display: none; align-items: center; gap: 10px; font-size: 14px; font-weight: 600;
  animation: pulseAlert 2s infinite;
}
.alert-box.show { display: flex; }
@keyframes pulseAlert { 0%,100%{box-shadow: 0 0 0 rgba(239,68,68,0);} 50%{box-shadow: 0 0 15px rgba(239,68,68,0.3);} }

/* STATS GRID */
.grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 30px; }
.stat-box {
  background: rgba(255,255,255,0.03); border: 1px solid var(--glass-border);
  padding: 15px; border-radius: 18px; text-align: center;
}
.stat-icon { font-size: 24px; margin-bottom: 5px; }
.stat-val { font-family: 'Orbitron', sans-serif; font-size: 22px; font-weight: 700; margin: 5px 0; }
.stat-label { font-size: 12px; color: var(--text-dim); text-transform: uppercase; }

/* SECTIONS */
.section-title {
  font-family: 'Orbitron', sans-serif; font-size: 16px; color: var(--primary);
  margin: 30px 0 15px; display: flex; align-items: center; gap: 10px;
}
.section-title::after { content:''; flex:1; height:1px; background: linear-gradient(90deg, var(--glass-border), transparent); }

/* HORIZONTAL SCROLL */
.scroll-wrap { overflow-x: auto; padding-bottom: 10px; display: flex; gap: 10px; scrollbar-width: none; }
.scroll-wrap::-webkit-scrollbar { display: none; }
.hour-item {
  min-width: 70px; background: rgba(255,255,255,0.03); border-radius: 16px;
  padding: 12px 5px; text-align: center; border: 1px solid transparent;
}
.hour-time { font-size: 12px; color: var(--text-dim); margin-bottom: 5px; }
.hour-icon { font-size: 24px; margin: 5px 0; }
.hour-temp { font-weight: 700; font-size: 16px; }

/* DAILY LIST */
.day-row {
  display: flex; align-items: center; justify-content: space-between;
  background: rgba(255,255,255,0.02); padding: 15px 20px; border-radius: 16px;
  margin-bottom: 8px; border: 1px solid transparent;
}
.day-name { width: 100px; font-weight: 600; }
.day-icon { font-size: 24px; width: 40px; text-align: center; }
.day-temps { display: flex; gap: 15px; font-family: 'Orbitron', sans-serif; }
.t-max { font-weight: 700; color: white; }
.t-min { color: var(--text-dim); }

/* FOOTER */
.footer { text-align: center; font-size: 11px; color: #475569; margin-top: 40px; line-height: 1.6; }

/* RESPONSIVE FIXES */
@media (max-width: 380px) {
  .hero-logo { font-size: 32px; }
  .main-temp { font-size: 64px; }
  .main-icon { font-size: 60px; }
}
</style>
</head>
<body>

<div class="bg-fixed">
  <div class="orb orb1"></div>
  <div class="orb orb2"></div>
</div>

<div class="container">
  
  <div class="hero">
    <div class="logo">ULGI PRO</div>
    <div class="tagline">BAYAN-OLGII WEATHER</div>
    <div class="model-badge" id="modelInfo">CONNECTING...</div>
  </div>

  <div class="controls">
    <div class="lang-group">
      <button class="lang-btn active" onclick="setLang('kk')" data-l="kk">“ö–ê–ó</button>
      <button class="lang-btn" onclick="setLang('mn')" data-l="mn">–ú–û–ù</button>
      <button class="lang-btn" onclick="setLang('en')" data-l="en">ENG</button>
    </div>
    <div class="loc-bar">
      <button class="gps-btn" id="gpsBtn" onclick="toggleGPS()"><i class="fas fa-location-arrow"></i></button>
      <select class="loc-select" id="locSelect" onchange="manualLoc()"></select>
    </div>
  </div>

  <div class="alert-box" id="alertBox">
    <i class="fas fa-exclamation-triangle"></i>
    <span id="alertText"></span>
  </div>

  <div class="main-card">
    <div class="main-icon" id="curIcon">‚òÄÔ∏è</div>
    <div class="main-temp" id="curTemp">--¬∞</div>
    <div class="main-desc" id="curDesc">–ñ“Ø–∫—Ç–µ–ª—É–¥–µ...</div>
    <div class="main-meta">
      <div class="meta-item"><i class="fas fa-wind"></i> <span id="metaWind">--</span></div>
      <div class="meta-item"><i class="fas fa-tint"></i> <span id="metaHum">--</span></div>
    </div>
  </div>

  <div class="grid">
    <div class="stat-box">
      <div class="stat-icon">üí®</div>
      <div class="stat-val" id="statWind">--</div>
      <div class="stat-label" data-i18n="wind">–ñ–µ–ª (–º/—Å)</div>
    </div>
    <div class="stat-box">
      <div class="stat-icon">‚òî</div>
      <div class="stat-val" id="statRain">--</div>
      <div class="stat-label" data-i18n="rain">–ñ–∞—É—ã–Ω (–º–º)</div>
    </div>
    <div class="stat-box">
      <div class="stat-icon">üå´Ô∏è</div>
      <div class="stat-val" id="statAqi">--</div>
      <div class="stat-label" data-i18n="air">–ê—É–∞ —Å–∞–ø–∞—Å—ã</div>
    </div>
    <div class="stat-box">
      <div class="stat-icon">üå°Ô∏è</div>
      <div class="stat-val" id="statFeel">--</div>
      <div class="stat-label" data-i18n="feels">–°–µ–∑—ñ–ª—É—ñ</div>
    </div>
  </div>

  <div class="section-title" data-i18n="hourly">24 –°–ê“í–ê–¢</div>
  <div class="scroll-wrap" id="hourlyList"></div>

  <div class="section-title" data-i18n="daily">7 –ö“Æ–ù</div>
  <div class="daily-list" id="dailyList"></div>

  <div class="footer">
    ULGI PRO v3.1 FIXED<br>
    DEVELOPED FOR BAYAN-OLGII<br>
    DATA: ECMWF / OPEN-METEO
  </div>

</div>

<script>
// CONFIG & DATA
const LOCS = [
  {n: {kk:"”®–ª–≥–∏–π", mn:"”®–ª–≥–∏–π", en:"Olgii"}, lat:48.9707, lon:89.9678},
  {n: {kk:"–ê–ª—Ç–∞–π", mn:"–ê–ª—Ç–∞–π", en:"Altai"}, lat:48.2937, lon:89.5113},
  {n: {kk:"–ê–ª—Ç–∞–Ω—Ü”©–≥—Ü", mn:"–ê–ª—Ç–∞–Ω—Ü”©–≥—Ü", en:"Altantsugts"}, lat:49.0556, lon:90.5283},
  {n: {kk:"–ë–∞—è–Ω–Ω—É—É—Ä", mn:"–ë–∞—è–Ω–Ω—É—É—Ä", en:"Bayannuur"}, lat:48.9567, lon:91.0125},
  {n: {kk:"–ë—É–≥–∞—Ç", mn:"–ë—É–≥–∞—Ç", en:"Bugat"}, lat:48.9328, lon:90.0169},
  {n: {kk:"–ë—É–ª–≥–∞–Ω", mn:"–ë—É–ª–≥–∞–Ω", en:"Bulgan"}, lat:46.9206, lon:91.0911},
  {n: {kk:"–ë—É—è–Ω—Ç", mn:"–ë—É—è–Ω—Ç", en:"Buyant"}, lat:48.5303, lon:89.4719},
  {n: {kk:"–î—ç–ª“Ø“Ø–Ω", mn:"–î—ç–ª“Ø“Ø–Ω", en:"Deluun"}, lat:47.8094, lon:90.7578},
  {n: {kk:"–ù–æ–≥–æ–æ–Ω–Ω—É—É—Ä", mn:"–ù–æ–≥–æ–æ–Ω–Ω—É—É—Ä", en:"Nogoonnuur"}, lat:49.6192, lon:90.2228},
  {n: {kk:"–°–∞–≥—Å–∞–π", mn:"–°–∞–≥—Å–∞–π", en:"Sagsai"}, lat:48.9083, lon:89.6506},
  {n: {kk:"–¢–æ–ª–±–æ", mn:"–¢–æ–ª–±–æ", en:"Tolbo"}, lat:48.4419, lon:90.0578},
  {n: {kk:"–¶–∞–≥–∞–∞–Ω–Ω—É—É—Ä", mn:"–¶–∞–≥–∞–∞–Ω–Ω—É—É—Ä", en:"Tsagaannuur"}, lat:49.5317, lon:89.7731},
  {n: {kk:"–¶—ç–Ω–≥—ç–ª", mn:"–¶—ç–Ω–≥—ç–ª", en:"Tsengel"}, lat:49.0772, lon:88.8500},
  {n: {kk:"–£–ª–∞–∞–Ω—Ö—É—Å", mn:"–£–ª–∞–∞–Ω—Ö—É—Å", en:"Ulaankhus"}, lat:49.3339, lon:89.4564}
];

const TEXT = {
  kk: {
    wind: "–ñ–µ–ª (–º/—Å)", rain: "–ñ–∞—É—ã–Ω (–º–º)", air: "–ê—É–∞ —Å–∞–ø–∞—Å—ã", feels: "–°–µ–∑—ñ–ª—É—ñ",
    hourly: "24 –°–ê“í–ê–¢", daily: "7 –ö“Æ–ù", today: "–ë“Ø–≥—ñ–Ω",
    wWarn: "–ï–°–ö–ï–†–¢–£: “ö–∞—Ç—Ç—ã –∂–µ–ª!", wDang: "“ö–ê–£–Ü–ü–¢–Ü –ñ–ï–õ!",
    codes: {0:"–ê—à—ã“õ",1:"–ê–∑ –±“±–ª—Ç—Ç—ã",2:"–ë“±–ª—Ç—Ç—ã",3:"–¢“Ø–Ω–µ—Ä–≥–µ–Ω",45:"–¢“±–º–∞–Ω",51:"–ñ–∞“£–±—ã—Ä",61:"–ñ–∞“£–±—ã—Ä",71:"“ö–∞—Ä",95:"–ù–∞–π–∑–∞“ì–∞–π"}
  },
  mn: {
    wind: "–°–∞–ª—Ö–∏ (–º/—Å)", rain: "–•—É—Ä —Ç—É–Ω–∞–¥–∞—Å", air: "–ê–≥–∞–∞—Ä—ã–Ω —á–∞–Ω–∞—Ä", feels: "–ú—ç–¥—Ä—ç–≥–¥—ç—Ö",
    hourly: "24 –¶–ê–ì", daily: "7 ”®–î”®–†", today: "”®–Ω”©”©–¥”©—Ä",
    wWarn: "–ê–ù–•–ê–ê–†: –•“Ø—á—Ç—ç–π —Å–∞–ª—Ö–∏!", wDang: "–ê–Æ–£–õ–¢–ê–ô –°–ê–õ–•–ò!",
    codes: {0:"–¶—ç–ª–º—ç–≥",1:"–ë–∞–≥–∞ “Ø“Ø–ª—Ç—ç–π",2:"“Æ“Ø–ª—Ç—ç–π",3:"–ë“Ø—Ä—ç–Ω—Ö–∏–π",45:"–ú–∞–Ω–∞–Ω",51:"–ë–æ—Ä–æ–æ",61:"–ë–æ—Ä–æ–æ",71:"–¶–∞—Å",95:"–ê—è–Ω–≥–∞"}
  },
  en: {
    wind: "Wind (m/s)", rain: "Rain (mm)", air: "Air Quality", feels: "Feels Like",
    hourly: "24 HOURS", daily: "7 DAYS", today: "Today",
    wWarn: "WARNING: Strong Wind!", wDang: "DANGEROUS WIND!",
    codes: {0:"Clear",1:"Partly Cloudy",2:"Cloudy",3:"Overcast",45:"Fog",51:"Drizzle",61:"Rain",71:"Snow",95:"Storm"}
  }
};

let curLang = localStorage.getItem('ulgi_lang') || 'kk';
let curLocIdx = 0;
let usingGPS = false;
let gpsData = null;

// INIT
function init() {
  renderLang();
  populateLocs();
  
  // Try GPS automatically first, fall back to Olgii
  if(localStorage.getItem('ulgi_gps') === 'true') {
    toggleGPS();
  } else {
    fetchData();
  }
}

function setLang(l) {
  curLang = l;
  localStorage.setItem('ulgi_lang', l);
  renderLang();
  populateLocs(); // Update select options language
  fetchData(); // Re-render weather text
}

function renderLang() {
  document.querySelectorAll('.lang-btn').forEach(b => {
    b.classList.toggle('active', b.dataset.l === curLang);
  });
  document.querySelectorAll('[data-i18n]').forEach(el => {
    el.textContent = TEXT[curLang][el.dataset.i18n];
  });
}

function populateLocs() {
  const sel = document.getElementById('locSelect');
  sel.innerHTML = '';
  LOCS.forEach((l, i) => {
    const opt = document.createElement('option');
    opt.value = i;
    opt.text = l.n[curLang];
    sel.appendChild(opt);
  });
  sel.value = curLocIdx;
}

function manualLoc() {
  usingGPS = false;
  localStorage.setItem('ulgi_gps', 'false');
  document.getElementById('gpsBtn').classList.remove('active');
  curLocIdx = document.getElementById('locSelect').value;
  fetchData();
}

async function toggleGPS() {
  const btn = document.getElementById('gpsBtn');
  if(!usingGPS) {
    btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
    if('geolocation' in navigator) {
      navigator.geolocation.getCurrentPosition(
        (pos) => {
          gpsData = {lat: pos.coords.latitude, lon: pos.coords.longitude};
          usingGPS = true;
          localStorage.setItem('ulgi_gps', 'true');
          btn.classList.add('active');
          btn.innerHTML = '<i class="fas fa-location-arrow"></i>';
          fetchData();
        },
        (err) => {
          alert('GPS Error: ' + err.message);
          btn.innerHTML = '<i class="fas fa-location-arrow"></i>';
          manualLoc();
        },
        {enableHighAccuracy: true, timeout: 10000}
      );
    } else {
      alert("GPS not supported");
    }
  } else {
    manualLoc();
  }
}

// DATA FETCHING
async function fetchData() {
  const loc = usingGPS ? gpsData : LOCS[curLocIdx];
  const badge = document.getElementById('modelInfo');
  
  badge.textContent = 'UPDATING...';
  
  // API URL construction
  const weatherUrl = `https://api.open-meteo.com/v1/forecast?latitude=${loc.lat}&longitude=${loc.lon}&current=temperature_2m,apparent_temperature,weather_code,wind_speed_10m,relative_humidity_2m,precipitation&hourly=temperature_2m,weather_code,wind_speed_10m&daily=weather_code,temperature_2m_max,temperature_2m_min,precipitation_sum&wind_speed_unit=ms&timezone=auto&models=ecmwf_ifs`;
  
  const airUrl = `https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${loc.lat}&longitude=${loc.lon}&current=european_aqi&timezone=auto`;

  try {
    const [wRes, aRes] = await Promise.all([
      fetch(weatherUrl),
      fetch(airUrl).catch(() => null) // Air quality fail shouldn't break app
    ]);
    
    if(!wRes.ok) throw new Error("Weather API Error");
    
    const wData = await wRes.json();
    const aData = aRes ? await aRes.json() : null;
    
    badge.textContent = 'ECMWF SATELLITE';
    renderUI(wData, aData);
    
  } catch (e) {
    console.error(e);
    badge.textContent = 'OFFLINE / ERROR';
    document.getElementById('curDesc').textContent = "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç –∂–æ“õ";
  }
}

function renderUI(w, a) {
  const c = w.current;
  const h = w.hourly;
  const d = w.daily;
  
  // Helper for Codes
  const getW = (code) => {
    const map = TEXT[curLang].codes;
    const desc = map[code] || map[Math.floor(code/10)*10] || "-";
    let icon = "‚òÅÔ∏è";
    if(code===0) icon="‚òÄÔ∏è";
    else if(code<3) icon="‚õÖ";
    else if(code<50) icon="üå´Ô∏è";
    else if(code<60) icon="üå¶Ô∏è";
    else if(code<70) icon="üåßÔ∏è";
    else if(code<80) icon="üå®Ô∏è";
    else if(code>90) icon="‚õàÔ∏è";
    return {t: desc, i: icon};
  }

  const curW = getW(c.weather_code);
  
  // CURRENT
  document.getElementById('curTemp').textContent = Math.round(c.temperature_2m) + "¬∞";
  document.getElementById('curIcon').textContent = curW.i;
  document.getElementById('curDesc').textContent = curW.t;
  document.getElementById('metaWind').textContent = c.wind_speed_10m + " m/s";
  document.getElementById('metaHum').textContent = c.relative_humidity_2m + "%";
  
  // ALERT
  const ab = document.getElementById('alertBox');
  if(c.wind_speed_10m > 18) {
    ab.className = "alert-box show";
    ab.style.borderColor = "var(--danger)";
    ab.innerHTML = `<i class="fas fa-radiation"></i> ${TEXT[curLang].wDang}`;
  } else if(c.wind_speed_10m > 10) {
    ab.className = "alert-box show";
    ab.style.borderColor = "var(--accent)";
    ab.innerHTML = `<i class="fas fa-exclamation-circle"></i> ${TEXT[curLang].wWarn}`;
  } else {
    ab.className = "alert-box";
  }

  // STATS
  document.getElementById('statWind').textContent = c.wind_speed_10m;
  document.getElementById('statRain').textContent = c.precipitation;
  document.getElementById('statAqi').textContent = a && a.current ? a.current.european_aqi : "--";
  document.getElementById('statFeel').textContent = Math.round(c.apparent_temperature) + "¬∞";

  // HOURLY (Correct time sync)
  let hHTML = "";
  const nowHour = new Date().getHours();
  // Open-Meteo hourly usually starts at 00:00 today. 
  // We need to find the index for current hour or just loop from "now"
  let startIndex = 0;
  // Simple check: if index 0 is 00:00, then index = nowHour
  // But strictly, we should parse ISO strings to be safe
  const nowISO = new Date().toISOString().slice(0,13); // "2023-10-10T15"
  
  for(let i=0; i<h.time.length; i++) {
    if(h.time[i].includes(`T${String(nowHour).padStart(2,'0')}`)) {
      startIndex = i;
      break;
    }
  }

  for(let i=startIndex; i < startIndex + 24 && i < h.time.length; i++) {
    const timeStr = h.time[i].split('T')[1];
    const temp = Math.round(h.temperature_2m[i]);
    const icon = getW(h.weather_code[i]).i;
    hHTML += `
      <div class="hour-item">
        <div class="hour-time">${timeStr}</div>
        <div class="hour-icon">${icon}</div>
        <div class="hour-temp">${temp}¬∞</div>
      </div>
    `;
  }
  document.getElementById('hourlyList').innerHTML = hHTML;

  // DAILY
  let dHTML = "";
  const days = {
    kk: ['–ñ–µ–∫','–î“Ø–π','–°–µ–π','–°”ô—Ä','–ë–µ–π','–ñ“±–º','–°–µ–Ω'],
    mn: ['–ù—è–º','–î–∞–≤','–ú—è–≥','–õ—Ö–∞','–ü“Ø—Ä','–ë–∞–∞','–ë—è–º'],
    en: ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']
  };

  for(let i=0; i<d.time.length; i++) {
    const date = new Date(d.time[i]);
    const dayName = i===0 ? TEXT[curLang].today : days[curLang][date.getDay()];
    const wc = getW(d.weather_code[i]);
    dHTML += `
      <div class="day-row">
        <div class="day-name">${dayName}</div>
        <div class="day-icon">${wc.i}</div>
        <div class="day-temps">
          <span class="t-max">${Math.round(d.temperature_2m_max[i])}¬∞</span>
          <span class="t-min">${Math.round(d.temperature_2m_min[i])}¬∞</span>
        </div>
      </div>
    `;
  }
  document.getElementById('dailyList').innerHTML = dHTML;
}

// START
init();

</script>
</body>
</html>
